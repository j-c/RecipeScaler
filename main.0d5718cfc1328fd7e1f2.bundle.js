webpackJsonp([1,4],{387:function(e,n){function t(e){throw new Error("Cannot find module '"+e+"'.")}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=387},388:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(475),i=t(0),s=t(510),o=t(506);s.a.production&&t.i(i.a)(),t.i(r.a)().bootstrapModule(o.a)},505:function(e,n,t){"use strict";var r=t(0);t.d(n,"a",function(){return o});var i=this&&this.__decorate||function(e,n,t,r){var i,s=arguments.length,o=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,n,t,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(n,t,o):i(n,t))||o);return s>3&&o&&Object.defineProperty(n,t,o),o},s=this&&this.__metadata||function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},o=function(){function e(){this.title="app works!"}return e=i([t.i(r.Q)({selector:"app-root",template:t(670),styles:[t(668)]}),s("design:paramtypes",[])],e)}()},506:function(e,n,t){"use strict";var r=t(103),i=t(0),s=t(466),o=t(202),a=t(329),c=t(664),d=t(505),u=t(507);t.d(n,"a",function(){return h});var p=this&&this.__decorate||function(e,n,t,r){var i,s=arguments.length,o=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,n,t,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(n,t,o):i(n,t))||o);return s>3&&o&&Object.defineProperty(n,t,o),o},l=this&&this.__metadata||function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},f=[{path:"r/:base64recipe",component:u.a},{path:"r",component:u.a},{path:"",redirectTo:"/r",pathMatch:"full"}],h=function(){function e(){}return e=p([t.i(i.b)({declarations:[d.a,u.a],imports:[r.a,s.a,o.a,a.a.forRoot(f),c.a],providers:[],bootstrap:[d.a]}),l("design:paramtypes",[])],e)}()},507:function(e,n,t){"use strict";var r=t(0),i=t(69),s=t(329),o=t(103),a=t(509);t.d(n,"a",function(){return u});var c=this&&this.__decorate||function(e,n,t,r){var i,s=arguments.length,o=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,n,t,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(n,t,o):i(n,t))||o);return s>3&&o&&Object.defineProperty(n,t,o),o},d=this&&this.__metadata||function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},u=function(){function e(e,n,t,r){this.location=e,this.route=n,this.router=t,this.title=r,this.editMode=!1}return Object.defineProperty(e.prototype,"recipe",{get:function(){return this._recipe},set:function(e){this._recipe=e,this.recipeViewModel=new a.a(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var n=this;this.route.params.subscribe(function(t){try{var r=t.base64recipe;if(r&&r.length>0){var i=e.decodeRecipe(r);n.recipe=i,n.title.setTitle(n.recipe.name+" - Recipe Scaler"),console.log("Recipe successfuly parsed from route param.")}else console.log("No recipe in route param, using default.")}catch(e){console.error("Could not parse recipe in route param, using default.")}n.recipe||n.navigateToRecipe(e.defaultRecipe)})},e.prototype.updateScaledValues=function(e){var n=e.scaledMeasure/e.measure;this.recipeViewModel.ingredients.forEach(function(t,r){t!==e&&(t.scaledMeasure=n*t.measure)}),this.recipeViewModel.recipeNumberOfServes>0&&(this.recipeViewModel.desiredNumberOfServes=this.recipeViewModel.recipeNumberOfServes*n)},e.prototype.updateServes=function(e){var n=e/this.recipeViewModel.recipeNumberOfServes;this.recipeViewModel.ingredients.forEach(function(e,t){e.scaledMeasure=n*e.measure})},e.prototype.generateUrlForRecipe=function(e){return window.location.origin+window.location.pathname},e.prototype.editRecipe=function(e){this.editMode=!0},e.prototype.saveRecipe=function(){this.editMode=!1;try{if(this.recipeJson&&this.recipeJson.length>0){var e=JSON.parse(this.recipeJson);this.navigateToRecipe(e)}}catch(e){console.error(e),window.alert("Error in Recipe JSON.")}},e.prototype.navigateToRecipe=function(n){this.router.navigate(["/r",e.encodeRecipe(n)])},e.encodeRecipe=function(e){return btoa(JSON.stringify(e))},e.decodeRecipe=function(e){return JSON.parse(atob(e))},Object.defineProperty(e,"defaultRecipe",{get:function(){var e={name:"Rittenhouse Rye whiskey",description:"50% ABV",measure:120,unitOfMeasure:"ml"},n=[];n.push({name:"Carpano Antica Formula vermouth",description:"16.5% ABV",measure:53,unitOfMeasure:"ml"}),n.push({name:"Angostura bitters",measure:4,unitOfMeasure:"dashes"}),n.push({name:"Brandied cherries or orange twists",measure:2,unitOfMeasure:""});var t={name:"Manhattans for two",description:"<p>Shake with ice and serve in a chilled coupe glass.</p><p>From Liquid Intelligence by Dave Arnold</p>",baseIngredient:e,additionalIngredients:n,numberOfServes:2};return t},enumerable:!0,configurable:!0}),e=c([t.i(r.Q)({selector:"app-recipe",providers:[i.c,{provide:i.d,useClass:i.g}],template:t(671),styles:[t(669)]}),d("design:paramtypes",["function"==typeof(n="undefined"!=typeof i.c&&i.c)&&n||Object,"function"==typeof(u="undefined"!=typeof s.b&&s.b)&&u||Object,"function"==typeof(p="undefined"!=typeof s.c&&s.c)&&p||Object,"function"==typeof(l="undefined"!=typeof o.c&&o.c)&&l||Object])],e);var n,u,p,l}()},508:function(e,n,t){"use strict";t.d(n,"a",function(){return r});var r=function(){function e(e,n){this.name=e.name,this.description=e.description;var t,r;if(t=e)this.measure=t.measure,this.unitOfMeasure=t.unitOfMeasure,this.scaledMeasure=this.measure,n?this.scaling=this.measure/n.measure:this.scaling=1;else{if(!(r=e))throw"Unknown recipe ingredient type";if(this.scaling=r.scaling,!n)throw"No base ingredient needed when using ScaledRecipeIngredient";this.unitOfMeasure=n.unitOfMeasure,this.measure=n.measure*this.scaling,this.scaledMeasure=this.measure}n?this.baseIngredientMeasure=n.measure:this.isBaseIngredient=!0}return e}()},509:function(e,n,t){"use strict";var r=t(508);t.d(n,"a",function(){return i});var i=function(){function e(e){if(this.name=e.name,this.description=e.description,this.recipeNumberOfServes=e.numberOfServes||0,this.desiredNumberOfServes=this.recipeNumberOfServes,this.ingredients=[],!e.baseIngredient)throw"No base ingredient specified";if(e.baseIngredient.measure<=0)throw"Base ingredient measure needs to be greater than 0";if(this.ingredients.push(new r.a(e.baseIngredient)),Array.isArray(e.additionalIngredients)&&e.additionalIngredients.length>0){var n=this.ingredients;e.additionalIngredients.forEach(function(t,i){n.push(new r.a(t,e.baseIngredient))})}else console.warn("Recipe only contains base ingredient")}return Object.defineProperty(e.prototype,"nameId",{get:function(){return this._nameId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e,this._nameId=e.toLowerCase().replace(/[^a-z]/g,"")},enumerable:!0,configurable:!0}),e}()},510:function(e,n,t){"use strict";t.d(n,"a",function(){return r});var r={production:!0}},668:function(e,n){e.exports=""},669:function(e,n){e.exports=""},670:function(e,n){e.exports='<div class="container">\r\n   <router-outlet></router-outlet>\r\n</div>'},671:function(e,n){e.exports='<div *ngIf="recipeViewModel">\r\n  <h1>{{ recipeViewModel.name }}</h1>\r\n\r\n  <div class="panel panel-default">\r\n    <div class="panel-body">\r\n      \r\n      <h4>Ingredients</h4>\r\n      <table class="table">\r\n        <colgroup>\r\n          <col style="width: 150px" />\r\n          <col style="width: 100px" />\r\n          <col style="width: 150px" />\r\n          <col />\r\n        </colgroup>\r\n        <thead>\r\n          <tr>\r\n            <th>Scaled</th>\r\n            <th>Scaling</th>\r\n            <th>Original measure</th>\r\n            <th>Ingredient</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr *ngFor="let ingredient of recipeViewModel.ingredients; let index = index">\r\n            <td>\r\n              <div class="input-group">\r\n                <input\r\n                  id="{{ recipeViewModel.nameId }}-ingredient-{{ index }}"\r\n                  type="number"\r\n                  class="form-control"\r\n                  [(ngModel)]="ingredient.scaledMeasure"\r\n                  (ngModelChange)="updateScaledValues(ingredient)"\r\n                  min="0"\r\n                  />\r\n                <span class="input-group-addon" *ngIf="ingredient.unitOfMeasure && ingredient.unitOfMeasure.length > 0">{{ ingredient.unitOfMeasure }}</span>\r\n              </div>\r\n            </td>\r\n            <td>\r\n              <div class="ingredient-list-item">\r\n                {{ ingredient.scaling | percent }}\r\n              </div>\r\n            </td>\r\n            <td>\r\n              <div class="ingredient-list-item">\r\n                {{ ingredient.measure }} {{ ingredient.unitOfMeasure }}\r\n              </div>\r\n            </td>\r\n            <td>\r\n              <div class="ingredient-list-item">\r\n                <div>{{ ingredient.name }}</div>\r\n                <div class="ingredient-description">{{ ingredient.description }}</div>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n          <tr *ngIf="recipeViewModel.recipeNumberOfServes > 0">\r\n            <td>\r\n              <div class="input-group">\r\n                <input\r\n                  type="number"\r\n                  class="form-control"\r\n                  [(ngModel)]="recipeViewModel.desiredNumberOfServes"\r\n                  (ngModelChange)="updateServes(recipeViewModel.desiredNumberOfServes)"\r\n                  min="0"\r\n                  />  \r\n                <span class="input-group-addon">serves</span>\r\n              </div>\r\n            </td>\r\n            <td></td>\r\n            <td>\r\n              <div class="ingredient-list-item">\r\n                {{ recipeViewModel.recipeNumberOfServes }} serves\r\n              </div>\r\n            </td>\r\n            <td></td>\r\n        </tbody>\r\n      </table>\r\n\r\n      <div [hidden]="!recipeViewModel.description || recipeViewModel.description.length == 0">\r\n        <hr />\r\n        <h4>Description</h4>\r\n        <div [innerHTML]="recipeViewModel.description"></div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="panel-footer">\r\n      <div class="form-inline">\r\n        <div class="pull-left">\r\n          <div class="input-group">\r\n            <div class="input-group-addon">\r\n              <span class="glyphicon glyphicon-link" title="Url to this recipe"></span>\r\n            </div>\r\n            <input\r\n              class="form-control"\r\n              type="text"\r\n              [ngModel]="generateUrlForRecipe(recipe)"\r\n              onfocus="this.select();"\r\n              readonly />\r\n          </div>\r\n        </div>\r\n\r\n        <div class="pull-right">\r\n          <button class="btn btn-primary" (click)="editRecipe(recipe)" *ngIf="!editMode">\r\n              <span class="glyphicon glyphicon-pencil"></span> Edit recipe\r\n          </button>\r\n          \r\n          <button class="btn btn-success" (click)="saveRecipe()" *ngIf="editMode">\r\n              <span class="glyphicon glyphicon-ok"></span> Done\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class="clearfix"></div>\r\n      <textarea *ngIf="editMode" class="form-control" (blur)="recipeJson = $event.target.value" rows="20">{{ recipe | json }}</textarea>\r\n    </div>\r\n  </div>\r\n\r\n  <div style="width: 200px">\r\n    <share-buttons\r\n      [url]="generateUrlForRecipe(recipe)"\r\n      [twitter]="false"\r\n      [pinterest]="false"\r\n      [linkedIn]="false"\r\n      [tumblr]="false"\r\n      [reddit]="false"\r\n      [stumbleUpOn]="false"\r\n    ></share-buttons>\r\n  </div>\r\n</div>\r\n\r\n'},692:function(e,n,t){e.exports=t(388)}},[692]);