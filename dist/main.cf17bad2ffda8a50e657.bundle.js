webpackJsonp([1,4],{382:function(e,n){function r(e){throw new Error("Cannot find module '"+e+"'.")}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=382},383:function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=r(471),i=r(0),s=r(506),o=r(502);s.a.production&&r.i(i.a)(),r.i(t.a)().bootstrapModule(o.a)},501:function(e,n,r){"use strict";var t=r(0);r.d(n,"a",function(){return o});var i=this&&this.__decorate||function(e,n,r,t){var i,s=arguments.length,o=s<3?n:null===t?t=Object.getOwnPropertyDescriptor(n,r):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,n,r,t);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(n,r,o):i(n,r))||o);return s>3&&o&&Object.defineProperty(n,r,o),o},s=this&&this.__metadata||function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},o=function(){function e(){this.title="app works!"}return e=i([r.i(t._4)({selector:"app-root",template:r(660),styles:[r(658)]}),s("design:paramtypes",[])],e)}()},502:function(e,n,r){"use strict";var t=r(147),i=r(0),s=r(461),o=r(467),a=r(324),c=r(501),d=r(503);r.d(n,"a",function(){return f});var u=this&&this.__decorate||function(e,n,r,t){var i,s=arguments.length,o=s<3?n:null===t?t=Object.getOwnPropertyDescriptor(n,r):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,n,r,t);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(n,r,o):i(n,r))||o);return s>3&&o&&Object.defineProperty(n,r,o),o},p=this&&this.__metadata||function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},l=[{path:"r/:base64recipe",component:d.a},{path:"r",component:d.a},{path:"",redirectTo:"/r",pathMatch:"full"}],f=function(){function e(){}return e=u([r.i(i.b)({declarations:[c.a,d.a],imports:[t.a,s.a,o.a,a.a.forRoot(l)],providers:[],bootstrap:[c.a]}),p("design:paramtypes",[])],e)}()},503:function(e,n,r){"use strict";var t=r(0),i=r(83),s=r(324),o=r(505);r.d(n,"a",function(){return d});var a=this&&this.__decorate||function(e,n,r,t){var i,s=arguments.length,o=s<3?n:null===t?t=Object.getOwnPropertyDescriptor(n,r):t;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,n,r,t);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(n,r,o):i(n,r))||o);return s>3&&o&&Object.defineProperty(n,r,o),o},c=this&&this.__metadata||function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},d=function(){function e(e,n,r){this.location=e,this.route=n,this.router=r,this.editMode=!1,this.recipe=l,this.generateUrlForRecipe(l)}return Object.defineProperty(e.prototype,"recipe",{get:function(){return this._recipe},set:function(e){this._recipe=e,this.recipeViewModel=new o.a(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){try{var e=this.route.snapshot.params.base64recipe;if(e&&e.length>0){var n=JSON.parse(atob(e));this.recipe=n,console.log("Recipe successfuly parsed from route param.")}else console.log("No recipe in route param.")}catch(e){console.error("Could not parse recipe in route param.")}},e.prototype.updateScaledValues=function(e){var n=e.scaledMeasure/e.measure;this.recipeViewModel.ingredients.forEach(function(r,t){r!==e&&(r.scaledMeasure=n*r.measure)}),this.recipeViewModel.recipeNumberOfServes>0&&(this.recipeViewModel.desiredNumberOfServes=this.recipeViewModel.recipeNumberOfServes*n)},e.prototype.updateServes=function(e){var n=e/this.recipeViewModel.recipeNumberOfServes;this.recipeViewModel.ingredients.forEach(function(e,r){e.scaledMeasure=n*e.measure})},e.prototype.generateUrlForRecipe=function(e){var n=window.location.pathname,r=n.slice(0,n.indexOf("/r")+2);return""+window.location.origin+r+"/"+btoa(JSON.stringify(e))},e.prototype.editRecipe=function(e){this.editMode=!0},e.prototype.saveRecipe=function(){this.editMode=!1;try{this.recipeJson&&this.recipeJson.length>0&&(this.recipe=JSON.parse(this.recipeJson))}catch(e){console.error(e),window.alert("Error in Recipe JSON.")}},e=a([r.i(t._4)({selector:"app-recipe",providers:[i.a,{provide:i.b,useClass:i.f}],template:r(661),styles:[r(659)]}),c("design:paramtypes",["function"==typeof(n="undefined"!=typeof i.a&&i.a)&&n||Object,"function"==typeof(d="undefined"!=typeof s.b&&s.b)&&d||Object,"function"==typeof(u="undefined"!=typeof s.c&&s.c)&&u||Object])],e);var n,d,u}(),u={name:"Rittenhouse Rye whiskey",description:"50% ABV",measure:120,unitOfMeasure:"ml"},p=[];p.push({name:"Carpano Antica Formula vermouth",description:"16.5% ABV",measure:53,unitOfMeasure:"ml"}),p.push({name:"Angostura bitters",measure:4,unitOfMeasure:"dashes"}),p.push({name:"Brandied cherries or orange twists",measure:2,unitOfMeasure:""});var l={name:"Manhattans for two",description:"<p>Shake with ice and serve in a chilled coupe glass.</p><p>From Liquid Intelligence by Dave Arnold</p>",baseIngredient:u,additionalIngredients:p,numberOfServes:2}},504:function(e,n,r){"use strict";r.d(n,"a",function(){return t});var t=function(){function e(e,n){this.name=e.name,this.description=e.description;var r,t;if(r=e)this.measure=r.measure,this.unitOfMeasure=r.unitOfMeasure,this.scaledMeasure=this.measure,n?this.scaling=this.measure/n.measure:this.scaling=1;else{if(!(t=e))throw"Unknown recipe ingredient type";if(this.scaling=t.scaling,!n)throw"No base ingredient needed when using ScaledRecipeIngredient";this.unitOfMeasure=n.unitOfMeasure,this.measure=n.measure*this.scaling,this.scaledMeasure=this.measure}n?this.baseIngredientMeasure=n.measure:this.isBaseIngredient=!0}return e}()},505:function(e,n,r){"use strict";var t=r(504);r.d(n,"a",function(){return i});var i=function(){function e(e){if(this.name=e.name,this.description=e.description,this.recipeNumberOfServes=e.numberOfServes||0,this.desiredNumberOfServes=this.recipeNumberOfServes,this.ingredients=[],!e.baseIngredient)throw"No base ingredient specified";if(e.baseIngredient.measure<=0)throw"Base ingredient measure needs to be greater than 0";if(this.ingredients.push(new t.a(e.baseIngredient)),Array.isArray(e.additionalIngredients)&&e.additionalIngredients.length>0){var n=this.ingredients;e.additionalIngredients.forEach(function(r,i){n.push(new t.a(r,e.baseIngredient))})}else console.warn("Recipe only contains base ingredient")}return Object.defineProperty(e.prototype,"nameId",{get:function(){return this._nameId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e,this._nameId=e.toLowerCase().replace(/[^a-z]/g,"")},enumerable:!0,configurable:!0}),e}()},506:function(e,n,r){"use strict";r.d(n,"a",function(){return t});var t={production:!0}},658:function(e,n){e.exports=""},659:function(e,n){e.exports=""},660:function(e,n){e.exports='<div class="container">\r\n   <router-outlet></router-outlet>\r\n</div>'},661:function(e,n){e.exports='<h1>{{ recipeViewModel.name }}</h1>\r\n\r\n<div class="panel panel-default">\r\n  <div class="panel-body">\r\n    \r\n    <h4>Ingredients</h4>\r\n    <table class="table">\r\n      <colgroup>\r\n        <col style="width: 150px" />\r\n        <col style="width: 100px" />\r\n        <col style="width: 150px" />\r\n        <col />\r\n      </colgroup>\r\n      <thead>\r\n        <tr>\r\n          <th>Scaled</th>\r\n          <th>Scaling</th>\r\n          <th>Original measure</th>\r\n          <th>Ingredient</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr *ngFor="let ingredient of recipeViewModel.ingredients; let index = index">\r\n          <td>\r\n            <div class="input-group">\r\n              <input\r\n                id="{{ recipeViewModel.nameId }}-ingredient-{{ index }}"\r\n                type="number"\r\n                class="form-control"\r\n                [(ngModel)]="ingredient.scaledMeasure"\r\n                (ngModelChange)="updateScaledValues(ingredient)"\r\n                min="0"\r\n                />\r\n              <span class="input-group-addon" *ngIf="ingredient.unitOfMeasure && ingredient.unitOfMeasure.length > 0">{{ ingredient.unitOfMeasure }}</span>\r\n            </div>\r\n          </td>\r\n          <td>\r\n            <div class="ingredient-list-item">\r\n              {{ ingredient.scaling | percent }}\r\n            </div>\r\n          </td>\r\n          <td>\r\n            <div class="ingredient-list-item">\r\n              {{ ingredient.measure }} {{ ingredient.unitOfMeasure }}\r\n            </div>\r\n          </td>\r\n          <td>\r\n            <div class="ingredient-list-item">\r\n              <div>{{ ingredient.name }}</div>\r\n              <div class="ingredient-description">{{ ingredient.description }}</div>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n        <tr *ngIf="recipeViewModel.recipeNumberOfServes > 0">\r\n          <td>\r\n            <div class="input-group">\r\n              <input\r\n                type="number"\r\n                class="form-control"\r\n                [(ngModel)]="recipeViewModel.desiredNumberOfServes"\r\n                (ngModelChange)="updateServes(recipeViewModel.desiredNumberOfServes)"\r\n                min="0"\r\n                />  \r\n              <span class="input-group-addon">serves</span>\r\n            </div>\r\n          </td>\r\n          <td></td>\r\n          <td>\r\n            <div class="ingredient-list-item">\r\n              {{ recipeViewModel.recipeNumberOfServes }} serves\r\n            </div>\r\n          </td>\r\n          <td></td>\r\n      </tbody>\r\n    </table>\r\n\r\n    <div [hidden]="!recipeViewModel.description || recipeViewModel.description.length == 0">\r\n      <hr />\r\n      <h4>Description</h4>\r\n      <div [innerHTML]="recipeViewModel.description"></div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class="panel-footer">\r\n    <div class="form-inline">\r\n      <div class="pull-left">\r\n        <div class="input-group">\r\n          <div class="input-group-addon">\r\n            <span class="glyphicon glyphicon-link" title="Url to this recipe"></span>\r\n          </div>\r\n          <input\r\n            class="form-control"\r\n            type="text"\r\n            [ngModel]="generateUrlForRecipe(recipe)"\r\n            onfocus="this.select();"\r\n            readonly />\r\n        </div>\r\n      </div>\r\n\r\n      <div class="pull-right">\r\n        <button class="btn btn-primary" (click)="editRecipe(recipe)" *ngIf="!editMode">\r\n            <span class="glyphicon glyphicon-pencil"></span> Edit recipe\r\n        </button>\r\n        \r\n        <button class="btn btn-success" (click)="saveRecipe()" *ngIf="editMode">\r\n            <span class="glyphicon glyphicon-ok"></span> Done\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class="clearfix"></div>\r\n    <textarea *ngIf="editMode" class="form-control" (blur)="recipeJson = $event.target.value" rows="20">{{ recipe | json }}</textarea>\r\n  </div>\r\n</div>\r\n\r\n\r\n'},678:function(e,n,r){e.exports=r(383)}},[678]);